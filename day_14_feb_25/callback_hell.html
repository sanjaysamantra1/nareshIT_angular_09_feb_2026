<script>
    function loginUser(username, callback) {
        setTimeout(() => {
            console.log('User Logged in');
            callback({ id: 1, username })
        }, 1000);
    }
    function fetchUserProfile(userId, callback) {
        setTimeout(() => {
            console.log('Profile fetched');
            callback({ userId, name: 'Sanjay', phone: 1234512345 })
        }, 1000);
    }
    function fetchCart(userId, callback) {
        setTimeout(() => {
            console.log('Cart fetched');
            callback({ items: ['laptop', 'mouse'], total: 1200 })
        }, 1000);
    }
    function makePayment(userId, callback) {
        setTimeout(() => {
            console.log('Payment successful');
            callback({ paymentId: 'pay123', status: 'success' })
        }, 1000);
    }
    function sendConfirmation(userId, callback) {
        setTimeout(() => {
            console.log('Confirmation mail sent');
            callback()
        }, 1000);
    }

    /* Realtime Usecase
    ================
    1. login user
    2. fetch user profile
    3. fetch cart
    4. make payment
    5. send confirmation */

    loginUser('sanjay', function (user) {  // callback hell
        fetchUserProfile(user.id, function (profile) {
            fetchCart(profile.id, function (cart) {
                makePayment(cart, function (payment) {
                    sendConfirmation(payment, function () {
                        console.log('Complete Order flow is done')
                    })
                })
            })
        })
    });


</script>